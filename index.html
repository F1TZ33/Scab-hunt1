<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scavenger Hunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: system-ui, sans-serif;
  background:#f4f6f8;
  padding:20px;
}

.card {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:14px;
}

button {
  padding:12px 18px;
  font-size:16px;
  cursor:pointer;
  border:none;
  border-radius:10px;
  margin-right:6px;
}

button.primary { background:#2ecc71;color:white; }
button.secondary { background:#3498db;color:white; }
button.delete { background:#e74c3c;color:white; }

.hunt-card {
  padding:16px;
  border-radius:12px;
  background:#f8fafc;
  margin-bottom:14px;
}

.search {
  width:100%;
  padding:12px;
  font-size:16px;
  margin:16px 0;
}
</style>
</head>

<body>
<div class="card" id="app"></div>

<script>
/* ================= DATA ================= */

const BASE_HUNTS = [
  { title:"Escape the House", steps:10 },
  { title:"Fortnite IRL", steps:12 },
  { title:"System Breach", steps:15 }
];

const userHunts =
  JSON.parse(localStorage.getItem("userHunts") || "[]");

/* ================= RENDER ================= */

const app = document.getElementById("app");

app.innerHTML = `
  <h1>Scavenger Hunts</h1>
  <button class="primary" onclick="location='create-hunt.html'">âž• Create New Hunt</button>
  <input class="search" placeholder="Search hunts...">
`;

const allHunts = [...BASE_HUNTS, ...userHunts]
  .sort((a,b)=>a.title.localeCompare(b.title));

allHunts.forEach(hunt => {
  const card = document.createElement("div");
  card.className = "hunt-card";

  card.innerHTML = `
    <strong>${hunt.title} (${hunt.steps} steps)</strong><br><br>
    <button class="secondary">â–¶ Test</button>
    <button class="secondary">ðŸ–¨ Print</button>
  `;

  const actions = card;

  /* ===== DELETE BUTTON FIX (ONLY CHANGE) ===== */

  const isUserCreated =
    userHunts.some(h => h.title === hunt.title);

  if (isUserCreated) {
    const deleteBtn = document.createElement("button");
    deleteBtn.className = "delete";
    deleteBtn.textContent = "ðŸ—‘ Delete";

    deleteBtn.onclick = () => {
      if (confirm(`Delete "${hunt.title}"?`)) {
        const updated =
          userHunts.filter(h => h.title !== hunt.title);
        localStorage.setItem("userHunts", JSON.stringify(updated));
        location.reload();
      }
    };

    actions.appendChild(deleteBtn);
  }

  /* ===== END FIX ===== */

  app.appendChild(card);
});
</script>
</body>
</html>