<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scavenger Hunts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f2f7fb;
  --card:#ffffff;
  --accent:#6c63ff;
  --green:#2ecc71;
  --text:#222;
}
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
h1,h2,h3{text-align:center;}
.card{
  background:var(--card);
  border-radius:14px;
  padding:20px;
  margin-bottom:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
}
.search{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-bottom:20px;
  font-size:16px;
}
.hunt-title{
  font-size:20px;
  font-weight:700;
  text-align:center;
}
.hunt-actions{
  display:flex;
  justify-content:center;
  gap:14px;
  margin-top:12px;
}
.btn{
  padding:12px 18px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  font-size:16px;
}
.btn-accent{background:var(--accent);color:white;}
.btn-green{background:var(--green);color:white;}
.btn-outline{background:#eee;}

.center{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:70vh;
  text-align:center;
}
.clue{
  font-size:1.8rem;
  font-weight:700;
  margin-bottom:30px;
}
input.answer{
  width:80%;
  max-width:300px;
  padding:14px;
  font-size:1.4rem;
  text-align:center;
  border-radius:10px;
  border:2px solid #ccc;
  margin-bottom:20px;
}
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.overlay.success{
  background:rgba(46,204,113,.9);
  color:white;
  font-size:3rem;
  font-weight:800;
}
@media print{
  body{background:white;}
  .no-print{display:none;}
  .page-break{page-break-before:always;}
}
.qr-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:20px;
  text-align:center;
}
</style>
</head>

<body>
<div class="overlay success" id="successOverlay">‚úî</div>
<div class="container" id="app"></div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<script>
/* ---------------- DATA (VERBATIM) ---------------- */

const HUNTS = {
escape:{
name:"Escape the House",
intro:"üéâ Welcome, Explorer!\n\nYou have been invited on a special scavenger hunt!\n\nAround this place are hidden clues waiting to be found.\nEach clue will lead you to the next one.\n\nWhen you find a clue, you might need to:\n‚Ä¢ Look carefully\n‚Ä¢ Think smart\n‚Ä¢ Scan a QR code\n‚Ä¢ Type in a secret number\n\nDon‚Äôt worry ‚Äî there are no wrong turns, just keep trying!\n\nWhen you‚Äôre ready‚Ä¶\nTap the button below to begin your adventure! üöÄ",
clues:[
{clue:"I show your face but I‚Äôm not a photo. I hang on walls and doors. Where am I?",answer:"mirror"},
{clue:"I have pages but no homework. I‚Äôm quiet unless you drop me. I live where stories sleep.",answer:"bookshelf"},
{clue:"I open wide but never talk. I keep food safe and cold. Don‚Äôt forget to close me!",answer:"fridge"},
{clue:"I go round and round but never get dizzy. I clean but hate socks in pairs.",answer:"washing machine"},
{clue:"I have hands but no arms. I never clap, but I‚Äôm always right on time.",answer:"clock"},
{clue:"I hide your feet when you‚Äôre not home. I like pairs, but I‚Äôm often missing one.",answer:"shoe rack"},
{clue:"I‚Äôm soft, I‚Äôm comfy, and I steal naps. People sit on me 'just for a minute'.",answer:"couch"},
{clue:"I light up the dark but disappear by day. Flip me on.",answer:"lamp"},
{clue:"I‚Äôm full of secrets, but I don‚Äôt talk. You knock before opening me.",answer:"bedroom door"},
{clue:"You cracked every lock! The final key is hidden where treasures are kept safe. Your Colour is RED",answer:"red"}
]},
fortnite:{
name:"Fortnite IRL",
intro:null,
clues:[
{clue:"You‚Äôve dropped in. First loot location: Where controllers go when the game is off.",answer:"gaming desk"},
{clue:"Shields up! Find the place where drinks recharge HP.",answer:"fridge"},
{clue:"Storm incoming üå™Ô∏è Where do shoes hide when the storm hits outside?",answer:"entrance"},
{clue:"You need mats. Wood, brick, metal‚Ä¶ Find where tools live.",answer:"garage"},
{clue:"Campfire deployed üî• Where the family gathers to chill.",answer:"lounge room"},
{clue:"Inventory check. You can‚Äôt win without sleep.",answer:"bed"},
{clue:"Chest nearby‚Ä¶ I hear it. Where secrets are stored behind closed doors.",answer:"wardrobe"},
{clue:"Reboot van activated ‚ö° Where devices come back to life.",answer:"phone charger"},
{clue:"High ground wins games. Go where you can see the whole room.",answer:"stairs"},
{clue:"Final circle. Only one remains. Where battles are watched, not played.",answer:"tv"},
{clue:"One last challenge‚Ä¶ Look where snacks disappear during long sessions.",answer:"pantry"},
{clue:"VICTORY ROYALE üèÜ Claim your reward where legends are made. Your colour is SILVER",answer:"silver"}
]},
hacker:{
name:"Hacker / System Breach",
intro:null,
clues:[
{clue:"SYSTEM ONLINE Begin at the device that controls all others.",answer:"router"},
{clue:"AUTHENTICATION REQUIRED Find where passwords are written but never stored digitally.",answer:"notebook"},
{clue:"DATA COLD STORAGE Files preserved at low temperature.",answer:"fridge"},
{clue:"INPUT DEVICE DETECTED Where commands are typed, not spoken.",answer:"keyboard"},
{clue:"PERIPHERAL FOUND One click can change everything.",answer:"mouse"},
{clue:"POWER SOURCE Without this, the system fails.",answer:"power board"},
{clue:"CACHE CLEARED Where clothes are reset to default state.",answer:"laundry"},
{clue:"BACKUP LOCATION Where items are stored 'just in case'.",answer:"garage"},
{clue:"DISPLAY OUTPUT Pixels form reality here.",answer:"monitor"},
{clue:"SECURITY CHECKPOINT Entry requires permission.",answer:"door"},
{clue:"ENCRYPTED STORAGE Locked, hidden, not obvious.",answer:"drawer"},
{clue:"SYSTEM LOG Tracks everything that happens over time.",answer:"clock"},
{clue:"USER PROFILE Where the operator rests.",answer:"bed"},
{clue:"FINAL ACCESS NODE Only the admin reaches this point.",answer:"desk"},
{clue:"ROOT ACCESS GRANTED ACCESS GRANTED SYSTEM BREACHED Retrieve payload from secure location. Your colour is GREEN",answer:"green"}
]}
};

/* ---------------- ROUTER ---------------- */

const app=document.getElementById("app");
const q=new URLSearchParams(location.search);

if(q.get("play")) play();
else if(q.get("print")) printPage(q.get("print"));
else home();

/* ---------------- INDEX ---------------- */

function home(){
app.innerHTML=`
<h1>Scavenger Hunts</h1>
<input class="search" placeholder="Search scavenger hunts‚Ä¶">
${Object.entries(HUNTS).map(([k,h])=>`
<div class="card">
<div class="hunt-title">${h.name} (${h.clues.length} steps)</div>
<div class="hunt-actions">
<button class="btn btn-accent" onclick="location='?play=${k}&s=0'">Test</button>
<button class="btn btn-outline" onclick="location='?print=${k}'">Print Instructions</button>
</div>
</div>`).join("")}
`;
}

/* ---------------- START + PLAY ---------------- */

function play(){
const key=q.get("play");
const step=parseInt(q.get("s")||0);
const hunt=HUNTS[key];

if(step===0){
app.innerHTML=`
<div class="center">
<pre style="white-space:pre-wrap">${hunt.intro}</pre>
<button class="btn btn-accent" onclick="location='?play=${key}&s=1'">‚ñ∂Ô∏è Start the Hunt</button>
</div>`;
return;
}

const idx=step-1;
const c=hunt.clues[idx];

app.innerHTML=`
<div class="center">
<div class="clue">${c.clue}</div>
<input class="answer" id="ans" inputmode="numeric">
<button class="btn btn-green" onclick="check('${key}',${step})">Submit</button>
</div>`;
}

function check(key,step){
const v=document.getElementById("ans").value.trim();
if(v){
document.getElementById("successOverlay").style.display="flex";
setTimeout(()=>{
document.getElementById("successOverlay").style.display="none";
location=`?play=${key}&s=${step+1}`;
},800);
}
}

/* ---------------- PRINT ---------------- */

function printPage(key){
const h=HUNTS[key];
app.innerHTML=`
<h2>${h.name} ‚Äî Parent Instructions</h2>
${h.clues.map((c,i)=>`
<div class="card">
<strong>Clue ${i+1}</strong><br>${c.clue}<br>
<strong>Answer:</strong> ${c.answer}<br>
<strong>Notes:</strong><br><br>
<div id="qrp${i}"></div>
</div>`).join("")}

<div class="page-break"></div>
<h2>${h.name} ‚Äî Cut-Out QR Codes</h2>
<div class="qr-grid">
${h.clues.map((c,i)=>`
<div>
<strong>${c.answer}</strong>
<div id="qrc${i}"></div>
</div>`).join("")}
</div>
<button class="btn btn-accent no-print" onclick="window.print()">Print</button>
`;

h.clues.forEach((c,i)=>{
QRCode.toCanvas(document.getElementById("qrp"+i),String(i+1).padStart(6,"0"));
QRCode.toCanvas(document.getElementById("qrc"+i),String(i+1).padStart(6,"0"));
});
}
</script>
</body>
</html>