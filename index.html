<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scavenger Hunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: system-ui, sans-serif;
  background: linear-gradient(180deg,#eef2f7,#f4f6f8);
  padding:20px;
}

.card {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:14px;
}

button {
  padding:14px 20px;
  font-size:18px;
  cursor:pointer;
  border:none;
  border-radius:10px;
}

button.primary { background:#2ecc71; color:white; }
button.secondary { background:#3498db; color:white; }
button.danger { background:#e74c3c; color:white; }

.center { text-align:center; }

.hunt-card {
  padding:16px;
  border-radius:12px;
  background:#f8fafc;
  margin-bottom:14px;
}

.search {
  width:100%;
  padding:12px;
  font-size:16px;
  margin:16px 0;
}

@media print {
  button, .search { display:none; }
}
</style>
</head>

<body>

<div class="card" id="app"></div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<script>
/* ================= UTIL ================= */
function uid(){ return Math.random().toString(36).slice(2,9); }
function code(){ return Math.floor(100000 + Math.random()*900000).toString(); }

/* ================= BASE HUNTS (VERBATIM) ================= */
const BASE_HUNTS = [
{
  name:"Escape the House",
  clues:[
    ["I show your face but Iâ€™m not a photo. I hang on walls and doors. Where am I?","Mirror"],
    ["I have pages but no homework. Iâ€™m quiet unless you drop me. I live where stories sleep.","Bookshelf"],
    ["I open wide but never talk. I keep food safe and cold. Donâ€™t forget to close me!","Fridge"],
    ["I go round and round but never get dizzy. I clean but hate socks in pairs.","Washing Machine"],
    ["I have hands but no arms. I never clap, but Iâ€™m always right on time.","Clock"],
    ["I hide your feet when youâ€™re not home. I like pairs, but Iâ€™m often missing one.","Shoe Rack"],
    ["Iâ€™m soft, Iâ€™m comfy, and I steal naps. People sit on me 'just for a minute'.","Couch"],
    ["I light up the dark but disappear by day. Flip me on.","Lamp"],
    ["Iâ€™m full of secrets, but I donâ€™t talk. You knock before opening me.","Bedroom Door"],
    ["You cracked every lock! The final key is hidden where treasures are kept safe. Your Colour is RED","Red Ribbon"]
  ]
},
{
  name:"Fortnite IRL",
  clues:[
    ["Youâ€™ve dropped in. First loot location: Where controllers go when the game is off.","Gaming Desk"],
    ["Shields up! Find the place where drinks recharge HP.","Fridge"],
    ["Storm incoming ðŸŒªï¸ Where do shoes hide when the storm hits outside?","Entrance"],
    ["You need mats. Wood, brick, metalâ€¦ Find where tools live.","Garage"],
    ["Campfire deployed ðŸ”¥ Where the family gathers to chill.","Lounge Room"],
    ["Inventory check. You canâ€™t win without sleep.","Bed"],
    ["Chest nearbyâ€¦ I hear it. Where secrets are stored behind closed doors.","Wardrobe"],
    ["Reboot van activated âš¡ Where devices come back to life.","Phone Charger"],
    ["High ground wins games. Go where you can see the whole room.","Stairs"],
    ["Final circle. Only one remains. Where battles are watched, not played.","TV"],
    ["One last challengeâ€¦ Look where snacks disappear during long sessions.","Pantry"],
    ["VICTORY ROYALE ðŸ† Claim your reward where legends are made. Your colour is SILVER","Silver Ribbon"]
  ]
},
{
  name:"System Breach",
  clues:[
    ["SYSTEM ONLINE Begin at the device that controls all others.","Router"],
    ["AUTHENTICATION REQUIRED Find where passwords are written but never stored digitally.","Notebook"],
    ["DATA COLD STORAGE Files preserved at low temperature.","Fridge"],
    ["INPUT DEVICE DETECTED Where commands are typed, not spoken.","Keyboard"],
    ["PERIPHERAL FOUND One click can change everything.","Mouse"],
    ["POWER SOURCE Without this, the system fails.","Power Board"],
    ["CACHE CLEARED Where clothes are reset to default state.","Laundry"],
    ["BACKUP LOCATION Where items are stored 'just in case'.","Garage"],
    ["DISPLAY OUTPUT Pixels form reality here.","Monitor"],
    ["SECURITY CHECKPOINT Entry requires permission.","Door"],
    ["ENCRYPTED STORAGE Locked, hidden, not obvious.","Drawer"],
    ["SYSTEM LOG Tracks everything that happens over time.","Clock"],
    ["USER PROFILE Where the operator rests.","Bed"],
    ["FINAL ACCESS NODE Only the admin reaches this point.","Desk"],
    ["ROOT ACCESS GRANTED ACCESS GRANTED SYSTEM BREACHED Retrieve payload from secure location. Your colour is GREEN","Green Ribbon"]
  ]
}
];

/* ================= INIT ================= */
let hunts = JSON.parse(localStorage.getItem("hunts")||"[]");

if(!localStorage.getItem("huntsInitialized")){
  hunts = BASE_HUNTS.map(h=>({
    id: uid(),
    name: h.name,
    isBase: true,
    steps: h.clues.map(c=>({
      clue: c[0],
      location: c[1],
      code: code()
    }))
  }));
  localStorage.setItem("hunts",JSON.stringify(hunts));
  localStorage.setItem("huntsInitialized","true");
}

const app = document.getElementById("app");

/* ================= HOME ================= */
function home(){
  const hunts = JSON.parse(localStorage.getItem("hunts")||"[]");

  app.innerHTML = `
    <h1>Scavenger Hunts</h1>

    <button class="secondary" onclick="location='create-hunt.html'">
      âž• Create New Hunt
    </button>

    <input class="search" placeholder="Search hunts...">

    ${hunts.map(h=>`
      <div class="hunt-card">
        <strong>${h.name} (${h.steps.length} steps)</strong><br><br>

        <button onclick="location='?start=${h.id}'">â–¶ Test</button>
        <button onclick="location='?print=${h.id}'">ðŸ–¨ Print</button>

        ${!h.isBase ? `
          <button class="danger" onclick="deleteHunt('${h.id}')">
            ðŸ—‘ Delete
          </button>
        ` : ``}
      </div>
    `).join("")}
  `;
}

function deleteHunt(id){
  if(!confirm("Delete this hunt? This cannot be undone.")) return;
  let hunts = JSON.parse(localStorage.getItem("hunts")||"[]");
  hunts = hunts.filter(h=>h.id!==id);
  localStorage.setItem("hunts",JSON.stringify(hunts));
  home();
}

home();
</script>

</body>
</html>