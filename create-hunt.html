<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create New Hunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: system-ui, sans-serif;
  background: linear-gradient(180deg,#eef2f7,#f4f6f8);
  padding:20px;
}

.card {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:14px;
}

h1 { margin-top:0; }

label {
  font-weight:600;
  display:block;
  margin-top:18px;
}

select, textarea, input {
  width:100%;
  padding:14px;
  font-size:16px;
  margin-top:8px;
  border-radius:8px;
  border:1px solid #ccc;
}

button {
  padding:12px 16px;
  font-size:16px;
  border-radius:8px;
  border:none;
  cursor:pointer;
}

button.primary {
  background:#2ecc71;
  color:white;
  margin-top:16px;
}

button.secondary {
  background:#3498db;
  color:white;
  margin-top:12px;
}

.mode-toggle {
  display:flex;
  gap:12px;
  margin-top:10px;
}

.mode-toggle button {
  flex:1;
  background:#f0f3f6;
}

.mode-toggle button.active {
  background:#3498db;
  color:white;
}

.clue-list {
  margin-top:24px;
}

.clue-card {
  background:#f8fafc;
  border-radius:12px;
  padding:16px;
  margin-bottom:12px;
  transition:transform 0.2s ease, opacity 0.2s ease;
}

.clue-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}

.step {
  font-weight:700;
}

.controls button {
  margin-left:6px;
}

.badge {
  font-size:12px;
  background:#e1e8ed;
  padding:4px 8px;
  border-radius:999px;
}
</style>
</head>

<body>

<div class="card">
  <h1>Create New Scavenger Hunt</h1>

  <label>Hunt Name</label>
  <input placeholder="Enter hunt name">

  <label>Theme</label>
  <select>
    <option>Escape</option>
    <option>Fortnite</option>
    <option>Hacker</option>
    <option>Neutral</option>
    <option>Custom</option>
  </select>

  <label>Add a Clue</label>
  <div class="mode-toggle">
    <button id="useExisting" class="active">Use Existing Clue</button>
    <button id="useCustom">Write My Own</button>
  </div>

  <div id="existingPanel">
    <label>Select Hunt</label>
    <select id="huntSelect"></select>

    <label>Select Clue</label>
    <select id="clueSelect"></select>
  </div>

  <div id="customPanel" style="display:none">
    <label>Clue Text</label>
    <textarea rows="3" placeholder="Write your clue here..."></textarea>
  </div>

  <button class="secondary" onclick="addClue()">‚ûï Add Clue</button>

  <div class="clue-list" id="clueList"></div>

  <button class="primary" disabled>üíæ Save Hunt (disabled for UI testing)</button>
</div>

<script>
/* ===== LOAD EXISTING HUNTS (READ ONLY) ===== */
const hunts = JSON.parse(localStorage.getItem("hunts") || "[]");

const huntSelect = document.getElementById("huntSelect");
const clueSelect = document.getElementById("clueSelect");

hunts.forEach((h,i)=>{
  const opt = document.createElement("option");
  opt.value = i;
  opt.textContent = h.name;
  huntSelect.appendChild(opt);
});

function populateClues(){
  clueSelect.innerHTML = "";
  const h = hunts[huntSelect.value];
  if(!h) return;
  h.steps.forEach((s,i)=>{
    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = s.clue;
    clueSelect.appendChild(opt);
  });
}
huntSelect.addEventListener("change", populateClues);
populateClues();

/* ===== MODE TOGGLE ===== */
const useExisting = document.getElementById("useExisting");
const useCustom = document.getElementById("useCustom");
const existingPanel = document.getElementById("existingPanel");
const customPanel = document.getElementById("customPanel");

useExisting.onclick = ()=>{
  useExisting.classList.add("active");
  useCustom.classList.remove("active");
  existingPanel.style.display="block";
  customPanel.style.display="none";
};

useCustom.onclick = ()=>{
  useCustom.classList.add("active");
  useExisting.classList.remove("active");
  existingPanel.style.display="none";
  customPanel.style.display="block";
};

/* ===== CLUE LIST ===== */
const clueList = document.getElementById("clueList");
let clues = [];

function render(){
  clueList.innerHTML = "";
  clues.forEach((c,i)=>{
    const div = document.createElement("div");
    div.className="clue-card";
    div.innerHTML = `
      <div class="clue-header">
        <div class="step">Step ${i+1}</div>
        <div class="controls">
          <button onclick="move(${i},-1)" ${i===0?"disabled":""}>‚¨ÜÔ∏è</button>
          <button onclick="move(${i},1)" ${i===clues.length-1?"disabled":""}>‚¨áÔ∏è</button>
        </div>
      </div>
      <div>${c.text}</div>
      <div class="badge">${c.source}</div>
    `;
    clueList.appendChild(div);
  });
}

function addClue(){
  if(useExisting.classList.contains("active")){
    const h = hunts[huntSelect.value];
    const s = h.steps[clueSelect.value];
    clues.push({ text:s.clue, source:`From "${h.name}"` });
  } else {
    const t = customPanel.querySelector("textarea").value.trim();
    if(!t) return;
    clues.push({ text:t, source:"Custom" });
    customPanel.querySelector("textarea").value="";
  }
  render();
}

function move(i,dir){
  const target = i + dir;
  if(target<0 || target>=clues.length) return;
  [clues[i], clues[target]] = [clues[target], clues[i]];
  render();
}
</script>

</body>
</html>
